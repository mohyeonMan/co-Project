<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="productSQL">
  <insert id="productWrite" parameterType="product">
		INSERT INTO producttable(subject, 
								 category_1, 
								 category_2,
								 content, 
								 hopeprice, 
								 startprice, 
								 nowprice,
								 unitprice, 
								 trade_way, 
								 enddays_year, 
								 enddays_month, 
								 enddays_day, 
								 enddays_hour, 
								 enddays_min, 
								 id, 
								 product_seq, 
								 img1, 
								 img2, 
								 img3, 
								 img4, 
								 logdate, 
								 hit,
								 enddate,
								 prdstatus) 
		VALUES (#{subject}
				,#{category_1}
				,#{category_2}
				,#{content}
				,#{hopeprice}
				,#{startprice}
				,#{startprice}
				,#{unitprice}
				,#{trade_way}
				,#{enddays_year}
				,#{enddays_month}
				,#{enddays_day}
				,#{enddays_hour}
				,#{enddays_min}
				,#{id}
				,product_seq.nextval
				,#{img1}
				,#{img2}
				,#{img3}
				,#{img4}
				,sysdate
				,0
				,#{endDate}
				,'진행중')
	</insert>
	
	<select id="getList" resultType="product">
		SELECT * FROM producttable ORDER by product_seq DESC
	</select>
	<select id="getList2" resultType="product">
		SELECT * FROM producttable ORDER by startprice DESC
	</select>
	<select id="getView" parameterType="map" resultType="product">
		select * from producttable where product_seq=#{product_seq}
	</select>
	<select id="getProductSort" parameterType="map" resultType="product">
		SELECT * FROM producttable ORDER by ${sort}
	</select>
	<update id="updateHit" parameterType="map">
		update  producttable set hit = #{hit} where product_seq = #{product_seq}
	</update>
	<insert id="saveNotify" parameterType="soket">
		INSERT INTO soket VALUES (#{target},#{content},#{type},#{url})
	</insert>
	
  </mapper>